\hypertarget{classLogin}{
\subsection{Login Klassenreferenz}
\label{classLogin}\index{Login@{Login}}
}
Verwaltet Logininformationen.  


\subsubsection*{\"{O}ffentliche Methoden}
\begin{CompactItemize}
\item 
\hyperlink{classLogin_5d83c782459f6389f350666eb102974d}{Login} (\$benutzer=\char`\"{}\char`\"{}, \$passwort=\char`\"{}\char`\"{})
\begin{CompactList}\small\item\em Liest bzw. Erstellt Session für Anmeldedaten. \item\end{CompactList}\item 
\hyperlink{classLogin_4cbf74bd382f34e863aec07c3eda0400}{Logout} ()
\begin{CompactList}\small\item\em Entfernt Session. \item\end{CompactList}\item 
\hyperlink{classLogin_6c120224aa6719f58c6ccd08acc28758}{Is\-Administrator} ()
\begin{CompactList}\small\item\em Ermittelt ob Administratorrechte vorliegen. \item\end{CompactList}\item 
\hyperlink{classLogin_70d2747b0aa454f4203a789afea25318}{Is\-Member} ()
\begin{CompactList}\small\item\em Ermittelt ob mindestens Mitgliedsrechte vorliegen. \item\end{CompactList}\end{CompactItemize}
\subsubsection*{\"{O}ffentliche Attribute}
\begin{CompactItemize}
\item 
\hyperlink{classLogin_227dede2a7c9c25b1e103b32de62d4df}{\$Nr}
\begin{CompactList}\small\item\em Mitglieds\_\-Nr für angemeldetes \hyperlink{classMitglied}{Mitglied} (sonst 0). \item\end{CompactList}\end{CompactItemize}


\subsubsection{Ausf\"{u}hrliche Beschreibung}
Verwaltet Logininformationen. 

Verwaltet die aus der sich aktuellen Anmeldung ergebenen Session des Users und der damit entstehenden Rechte \begin{Desc}
\item[Vorbedingung:]Das Loginobjekt muss vor einer Übertragung von Inhaltsdaten zum User angelegt werden, um ein Cookie anlegen zu können. Es sollte kein zweites Objekt vom Typ \hyperlink{classLogin}{Login} existieren. Datenbankverbindung muss bestehen. \end{Desc}
\begin{Desc}
\item[Bemerkungen:]Sollte ein weiteres Objekt vom Typ \hyperlink{classLogin}{Login} existieren, in welche neue Logininformationen eingetragen werden, wird keine weitere Session angelegt, sondern die alten Informationen in der aktuellen Session überschrieben. \end{Desc}
\begin{Desc}
\item[Importiert:]\begin{itemize}
\item \hyperlink{classMitglied_9b13db80866c22bf992e73f2eb75e369}{Mitglied::Password\-Hash}\item \hyperlink{classSQLDB_fc6ffa8df50f68f07d9f5e3385b96d7a}{SQLDB::Query}\item \hyperlink{classSQLDB_a55c00ce1de0e50e0a58cae61892ba35}{SQLDB::Fetch}\end{itemize}
\end{Desc}
\begin{Desc}
\item[Autor:]Frank Wilhelm \end{Desc}
\begin{Desc}
\item[Änderungsstand:]30.05.2006 \end{Desc}




\subsubsection{Beschreibung der Konstruktoren und Destruktoren}
\hypertarget{classLogin_5d83c782459f6389f350666eb102974d}{
\index{Login@{Login}!Login@{Login}}
\index{Login@{Login}!Login@{Login}}
\paragraph[Login]{\setlength{\rightskip}{0pt plus 5cm}Login::Login (\$ {\em benutzer} = {\tt \char`\"{}\char`\"{}}, \$ {\em passwort} = {\tt \char`\"{}\char`\"{}})}\hfill}
\label{classLogin_5d83c782459f6389f350666eb102974d}


Liest bzw. Erstellt Session für Anmeldedaten. 

Liest Daten aus der Session ein. Sollten keine vorhanden sein, dann wird eine neue, leere Session angelegt. Sollten Daten vorhanden sein, wird die Korrektheit über die Datenbank (Mitglieder) und die Verbindungsinformationen geprüft. Nach dieser Prüfung werden abhängig vom Ausgang die Rechteinformationen gesetzt.\par
 Werden keine Parameter übergeben, wird das Klartextpasswort mit \hyperlink{classMitglied_9b13db80866c22bf992e73f2eb75e369}{Mitglied::Password\-Hash} gehasht, um diese mit Benutzernamen (\$benutzer) gegen die Einträge in Mitglieder zu prüfen. Ist diese erfolgreich, wird eine neue Session mit gehashtem Passwort, Benuternamen und Verbindungsinformationen erstellt. Sollte irgendwo ein Fehler bei der Anmeldung auftreten, erhält er Nutzerrechte (wird also nicht zum \hyperlink{classMitglied}{Mitglied}). Sonst erhält er die Rechte und Mitglieds\_\-Nr aus dem gefundenem Eintrag in Mitglieder. \begin{Desc}
\item[Parameter:]
\begin{description}
\item[\mbox{$\leftarrow$} {\em \$benutzer}]neuer Benutzername \item[\mbox{$\leftarrow$} {\em \$passwort}]Passwort in Klartext des Nutzers \end{description}
\end{Desc}
\begin{Desc}
\item[Vorbedingung:]Eine Verbindung zur Datenbank muss bestehen. Der Konstruktor muss vor dem Senden von Inhaltsdaten aufgerufen werden, um ein Cookie erstellen zu können.\par
 Zum Einloggen mit Daten darf kein Parameter leer sein \end{Desc}


\subsubsection{Dokumentation der Elementfunktionen}
\hypertarget{classLogin_6c120224aa6719f58c6ccd08acc28758}{
\index{Login@{Login}!IsAdministrator@{IsAdministrator}}
\index{IsAdministrator@{IsAdministrator}!Login@{Login}}
\paragraph[IsAdministrator]{\setlength{\rightskip}{0pt plus 5cm}Login::Is\-Administrator ()}\hfill}
\label{classLogin_6c120224aa6719f58c6ccd08acc28758}


Ermittelt ob Administratorrechte vorliegen. 

Vergleicht ob die bei der Erstellung des Loginobjekts ermittelten Rechte mindestens den Wert für Administratorrechte ($>$=2) haben. \begin{Desc}
\item[Vorbedingung:]- \end{Desc}
\begin{Desc}
\item[R\"{u}ckgabewerte:]
\begin{description}
\item[{\em true}]wenn Administratorrechte vorliegen \item[{\em false}]wenn Nutzer- oder Mitgliedsrechte vorliegen \end{description}
\end{Desc}
\hypertarget{classLogin_70d2747b0aa454f4203a789afea25318}{
\index{Login@{Login}!IsMember@{IsMember}}
\index{IsMember@{IsMember}!Login@{Login}}
\paragraph[IsMember]{\setlength{\rightskip}{0pt plus 5cm}Login::Is\-Member ()}\hfill}
\label{classLogin_70d2747b0aa454f4203a789afea25318}


Ermittelt ob mindestens Mitgliedsrechte vorliegen. 

Vergleicht ob die bei der Erstellung des Loginobjekts ermittelten Rechte mindestens den Wert für Mitgliedsrechte ($>$=1) haben. \begin{Desc}
\item[Vorbedingung:]- \end{Desc}
\begin{Desc}
\item[R\"{u}ckgabewerte:]
\begin{description}
\item[{\em true}]wenn mindestens Mitgliedsrechte vorliegen \item[{\em false}]wenn Nutzerrechte vorliegen \end{description}
\end{Desc}
\hypertarget{classLogin_4cbf74bd382f34e863aec07c3eda0400}{
\index{Login@{Login}!Logout@{Logout}}
\index{Logout@{Logout}!Login@{Login}}
\paragraph[Logout]{\setlength{\rightskip}{0pt plus 5cm}Login::Logout ()}\hfill}
\label{classLogin_4cbf74bd382f34e863aec07c3eda0400}


Entfernt Session. 

Die Anmeldedaten und Verbindungsdaten werden in der Session entfernt. Außerdem werden die Rechte auf Nutzer (0) und Nr auf 0 gesetzt. \begin{Desc}
\item[Vorbedingung:]- \end{Desc}


\subsubsection{Dokumentation der Datenelemente}
\hypertarget{classLogin_227dede2a7c9c25b1e103b32de62d4df}{
\index{Login@{Login}!$Nr@{\$Nr}}
\index{$Nr@{\$Nr}!Login@{Login}}
\paragraph[\$Nr]{\setlength{\rightskip}{0pt plus 5cm}Login::\$Nr}\hfill}
\label{classLogin_227dede2a7c9c25b1e103b32de62d4df}


Mitglieds\_\-Nr für angemeldetes \hyperlink{classMitglied}{Mitglied} (sonst 0). 

